# ============================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================
# This file contains production environment variables for Railway deployment
# Copy this file to .env in Railway dashboard and fill in actual values
# DO NOT commit actual .env file with real credentials to Git

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
# Railway automatically provides PORT variable, but you can override it
PORT=7000

# Frontend URL - UPDATE THIS after deploying to Vercel
# Example: https://your-app-name.vercel.app
FRONTEND_URL=https://your-vercel-app-url.vercel.app

# ============================================
# DATABASE CONFIGURATION (Railway MySQL)
# ============================================
# Railway provides these automatically when you add MySQL plugin
# You can find these in Railway dashboard under your MySQL service
# Format: mysql://user:password@host:port/database
# OR use individual variables:

DB_HOST=your-railway-mysql-host.railway.app
DB_USER=root
DB_PASSWORD=your-railway-mysql-password
DB_NAME=railway
DB_PORT=3306

# Alternative: Use DATABASE_URL if Railway provides it
# DATABASE_URL=mysql://root:password@host:port/railway

# ============================================
# JWT CONFIGURATION
# ============================================
# IMPORTANT: Generate a strong, unique secret for production
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERATE_A_STRONG_RANDOM_SECRET_HERE_DO_NOT_USE_DEFAULT
JWT_EXPIRE=30d

# ============================================
# SECURITY CONFIGURATION
# ============================================
BCRYPT_ROUNDS=12

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ============================================
# For production, use your actual Gmail account with App Password
# How to get Gmail App Password:
# 1. Go to Google Account settings
# 2. Security > 2-Step Verification (enable it)
# 3. Security > App passwords
# 4. Generate new app password for "Mail"

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-gmail-address@gmail.com
EMAIL_PASS=your-gmail-app-password-here
EMAIL_FROM_NAME=Barangay Bula Management System
EMAIL_FROM_ADDRESS=your-gmail-address@gmail.com

# ============================================
# OTP CONFIGURATION
# ============================================
OTP_EXPIRY_MINUTES=10
OTP_LENGTH=6

# ============================================
# PAYMONGO CONFIGURATION
# ============================================
# IMPORTANT: Use LIVE keys for production, not test keys
# Get your live keys from: https://dashboard.paymongo.com/developers

# For PRODUCTION - Use LIVE keys (pk_live_... and sk_live_...)
PAYMONGO_PUBLIC_KEY=pk_live_YOUR_LIVE_PUBLIC_KEY_HERE
PAYMONGO_SECRET_KEY=sk_live_YOUR_LIVE_SECRET_KEY_HERE

# For TESTING - Use TEST keys (keep these for staging/testing)
# PAYMONGO_PUBLIC_KEY=pk_test_YOUR_TEST_PUBLIC_KEY
# PAYMONGO_SECRET_KEY=sk_test_YOUR_TEST_SECRET_KEY

# PayMongo Webhook Configuration
# This will be set AFTER deployment when you know your Railway domain
# Example: https://your-app-name.up.railway.app/api/webhooks/paymongo
WEBHOOK_URL=https://your-railway-app-url.up.railway.app/api/webhooks/paymongo

# Webhook secret - will be provided by PayMongo when you create the webhook
PAYMONGO_WEBHOOK_SECRET=whsk_YOUR_WEBHOOK_SECRET_HERE

# PayMongo API Base URL (don't change this)
PAYMONGO_BASE_URL=https://api.paymongo.com/v1

# Enable online payments
ENABLE_ONLINE_PAYMENTS=true
PAYMENT_TIMEOUT_MINUTES=30

# ============================================
# SMS CONFIGURATION (TextBee - Optional)
# ============================================
# If you're using TextBee for SMS notifications
# TEXTBEE_API_KEY=your-textbee-api-key-here
# TEXTBEE_DEVICE_ID=your-textbee-device-id-here

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Railway uses ephemeral filesystem, so uploaded files will be lost on restart
# For production, consider using cloud storage (AWS S3, Cloudinary, etc.)
# For now, we'll use local storage but be aware of limitations
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# ============================================
# DEPLOYMENT NOTES
# ============================================
# 1. After deploying to Railway, update FRONTEND_URL with your Vercel URL
# 2. After deploying to Railway, update WEBHOOK_URL with your Railway URL
# 3. Create PayMongo webhook using the script:
#    node paymongo_webhook_manager.js create
# 4. Update PAYMONGO_WEBHOOK_SECRET with the secret from step 3
# 5. Restart your Railway backend after updating environment variables
# 6. Update your Vercel frontend environment variables with Railway backend URL

